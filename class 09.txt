소켓의 종료

tcp 기반 half-close
read 혹은 write 버퍼만 닫는것을 half-close라 지칭


일반
1 닫을 때는 write, read 버퍼 둘다 닫힘
2 이상황에서 write의 경우 내용을 다 내보내고 닫아야함
3 닫기전에 EOF를 전송하고 닫는다


일반적 연결종료의 문제점
소켓의 완전소멸 의미, 소멸이후의 입출력이 불가
단, 상대방 상태에 관계없이 일방적인 종료 형태
따라서 상태 호스트 전송이 완료되지 않은 상태라면 문제가 발생

이를 위해 half-close 활용



half-close
출력(write) 스트림은 종료 시켜도 됨 (일단 위의 규칙은 준수하며)
단, 상대방이 종료를 원하지 않을 수 도있음으로 입력(read) 스트림은 종료시키지 않음

즉, Half-close는 출력스트림만을 종료시키는 것을 의미



half close는 한쪽만 구현되어 있으면 됨
이는 먼저 종료를 요청할 측에서만 진행하면 됨

EOF는 종료시 자동으로 보냄

close() == read, write 둘다 닫음
shutdown() == read, write 혹은 둘다 닫는 것을 선택해 닫음

